load("female_manual.RData")
load("song_lyrics_male.RData")
load("male_manual.RData")
View(female_manual)
View(song_lyrics_female)
#polls <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-04-14/polls.csv')
rankings <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-04-14/rankings.csv')
song_male <- rankings %>%
filter(gender == "male") %>%
select(artist, title)
song_male <- rankings %>%
filter(gender == "male") %>%
dplyr::select(artist, title)
View(song_male)
lyrics_genius_male <- data.frame(line = character(),
section_name = character(),
section_artist = character(),
song_name = character(),
artist_name = character())
for (i in 1:nrow(song_male)) {
title <- song_male[i, "title"]
artist  <- song_male[i, "artist"]
df <- data.frame(line = character(),
section_name = character(),
section_artist = character(),
song_name = character(),
artist_name = character())
try(df <- get_lyrics_search(artist_name = artist, song_title = title))
lyrics_genius_male <- rbind(lyrics_genius_male, df)
}
library(genius)
for (i in 1:nrow(song_male)) {
title <- song_male[i, "title"]
artist  <- song_male[i, "artist"]
df <- data.frame(line = character(),
section_name = character(),
section_artist = character(),
song_name = character(),
artist_name = character())
try(df <- get_lyrics_search(artist_name = artist, song_title = title))
lyrics_genius_male <- rbind(lyrics_genius_male, df)
}
library(geniusr)
lyrics_genius_male <- data.frame(line = character(),
section_name = character(),
section_artist = character(),
song_name = character(),
artist_name = character())
for (i in 1:nrow(song_male)) {
title <- song_male[i, "title"]
artist  <- song_male[i, "artist"]
df <- data.frame(line = character(),
section_name = character(),
section_artist = character(),
song_name = character(),
artist_name = character())
try(df <- geniusr::get_lyrics_search(artist_name = artist, song_title = title))
lyrics_genius_male <- rbind(lyrics_genius_male, df)
}
View(lyrics_genius_male)
lyrics_genius_male %>%
group_by(song_name) %>%
summarise(cnt = n())
song_male
library(httr)
library(XML)
library(jsonlite)
baseURL <- 'https://api.genius.com/search?q='
Sys.setenv(genius_token = "RbbN9vBJ-sAt7bgL4a8cgP7C9DugtbljKAcLUAhXNp4Wf8tEd5AincLMm3Li_S0V")
#Sys.setenv(genius_token = "")
genius_token = Sys.getenv(genius_token)
#Sys.setenv(genius_token = "")
genius_token = Sys.getenv("genius_token")
query <- paste0(baseURL, song, artist, '&access_token=', genius_token)
artist <- "Lil Wayne"
song <- "La La La"
query <- paste0(baseURL, song, artist, '&access_token=', genius_token)
response <- fromJSON(query)
request <- httr::GET(
"https://api.genius.com/search",
query = list(
q = paste(song, artist),
access_token = genius_token
)
)
response <- jsonlite::fromJSON(httr::content(request, as = "text", encoding = "UTF-8"), flatten = TRUE)
View(response)
library(knitr)
opts_chunk$set(fig.path="figures\\",
cache.path="cache\\",
cache=FALSE,
echo=TRUE,
message=FALSE,
warning=FALSE)
library(tidyverse)
library(dplyr)
library(ggplot2)
library(ggthemes)
#polls <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-04-14/polls.csv')
rankings <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-04-14/rankings.csv')
load("song_lyrics_female.RData")
load("female_manual.RData")
load("song_lyrics_male.RData")
load("male_manual.RData")
View(song_lyrics_female)
View(female_manual)
View(rankings)
View(rankings)
View(song_lyrics_female)
female_p1 <- female_manual %>%
select(artist = artist_name, title = song_name, line)
female_p1 <- female_manual %>%
dplyr::select(artist = artist_name, title = song_name, line)
female_p2 <- song_lyrics_female %>%
select(artist, title = song_name, line = lyric)
female_p2 <- song_lyrics_female %>%
dplyr::select(artist, title = song_name, line = lyric)
female_p2 <- song_lyrics_female %>%
dplyr::select(artist, title, line = lyric)
female_p1 <- female_manual %>%
dplyr::select(artist = artist_name, title = song_name, line) %>%
rbind(song_lyrics_female %>% dplyr::select(artist, title, line = lyric))
female_combined <- female_manual %>%
dplyr::select(artist = artist_name, title = song_name, line) %>%
rbind(song_lyrics_female %>% dplyr::select(artist, title, line = lyric))
male_combined <- male_manual %>%
dplyr::select(artist = artist_name, title = song_name, line) %>%
rbind(song_lyrics_male %>% dplyr::select(artist, title, line = lyric))
View(female_combined)
female_combined %>%
distinct(artist, title)
rankings %>%
filter(gender = "female") %>%
left_join(female_combined %>% distinct(artist, title),
by = c("artist", "title"))
rankings %>%
filter(gender == "female") %>%
left_join(female_combined %>% distinct(artist, title),
by = c("artist", "title"))
rankings %>%
select(title, artist) %>%
filter(gender == "female") %>%
left_join(female_combined %>% distinct(artist, title),
by = c("artist", "title"))
rankings %>%
dplyr::select(title, artist) %>%
filter(gender == "female") %>%
left_join(female_combined %>% distinct(artist, title),
by = c("artist", "title"))
rankings %>%
filter(gender == "female") %>%
dplyr::select(title, artist) %>%
left_join(female_combined %>% distinct(artist, title),
by = c("artist", "title"))
rankings %>%
filter(gender == "female") %>%
filter(!title %in% female_combined$title)
rankings %>%
filter(gender == "male") %>%
filter(!title %in% male_combined$title)
distinct(male_combined, title)
distinct(female_combined, title)
rankings %>%
filter(gender == "male") %>%
filter(!title %in% male_combined$title)
distinct(rankings %>% filter(gender == "male"))
distinct(male_combined, title)
268-206
rankings %>%
filter(gender == "female") %>%
filter(!title %in% female_combined$title)
rankings %>%
filter(gender == "male") %>%
filter(!title %in% male_combined$title)
rankings %>%
filter(gender == "male") %>%
dplyr::select(title, artist) %>%
filter(!title %in% male_combined$title)
library(stringr)
rankings <- rankings %>%
mutate(artist = str_replace(artist, "(.*)ft\\..*$", "\\1"))
View(rankings)
rankings %>%
filter(gender == "male") %>%
dplyr::select(title, artist) %>%
filter(!title %in% male_combined$title)
library(genius)
library(geniusr)
song_female <- rankings %>%
filter(gender == "female") %>%
select(artist, title)
library(dplyr)
library(genius)
library(geniusr)
song_female <- rankings %>%
filter(gender == "female") %>%
select(artist, title)
library(genius)
library(geniusr)
song_female <- rankings %>%
filter(gender == "female") %>%
dplyr::select(artist, title)
song_lyrics_female <- song_female %>%
add_genius(artist, title, type = "lyrics")
# These are the songs that we don't found using package genius
female_missing <- song_lyrics_female %>%
group_by(artist, title) %>%
summarise(cnt = n()) %>%
right_join(song_female, by = c("artist", "title")) %>%
filter(is.na(cnt))
female_manual <- data.frame(line = character(),
section_name = character(),
section_artist = character(),
song_name = character(),
artist_name = character())
for (i in 1:nrow(female_missing)) {
title <- female_missing[i, "title"]
artist  <- female_missing[i, "artist"]
df <- data.frame(line = character(),
section_name = character(),
section_artist = character(),
song_name = character(),
artist_name = character())
try(df <- get_lyrics_search(artist_name = artist, song_title = title))
female_manual <- rbind(female_manual, df)
}
song_male <- rankings %>%
filter(gender == "male") %>%
dplyr::select(artist, title)
song_lyrics_male <- song_male %>%
add_genius(artist, title, type = "lyrics")
male_missing <- song_lyrics_male %>%
group_by(artist, title) %>%
summarise(cnt = n()) %>%
right_join(song_male, by = c("artist", "title")) %>%
filter(is.na(cnt))
male_manual <- data.frame(line = character(),
section_name = character(),
section_artist = character(),
song_name = character(),
artist_name = character())
for (i in 1:nrow(male_missing)) {
title <- male_missing[i, "title"]
artist  <- male_missing[i, "artist"]
df <- data.frame(line = character(),
section_name = character(),
section_artist = character(),
song_name = character(),
artist_name = character())
try(df <- get_lyrics_search(artist_name = artist, song_title = title))
male_manual <- rbind(male_manual, df)
}
male_manual %>%
group_by(section_artist, song_name) %>%
summarise(cnt = n())
save(song_lyrics_female, file = "song_lyrics_female.RData")
save(female_manual, file = "female_manual.RData")
save(song_lyrics_male, file = "song_lyrics_male.RData")
save(male_manual, file = "male_manual.RData")
female_combined <- female_manual %>%
dplyr::select(artist = artist_name, title = song_name, line) %>%
rbind(song_lyrics_female %>% dplyr::select(artist, title, line = lyric))
male_combined <- male_manual %>%
dplyr::select(artist = artist_name, title = song_name, line) %>%
rbind(song_lyrics_male %>% dplyr::select(artist, title, line = lyric))
rankings %>%
filter(gender == "female") %>%
filter(!title %in% female_combined$title)
rankings %>%
filter(gender == "female") %>%
dplyr::select(title, artist) %>%
filter(!title %in% female_combined$title)
rankings %>%
filter(gender == "male") %>%
dplyr::select(title, artist) %>%
filter(!title %in% male_combined$title)
# total female songs
rankings %>%
filter(gender == "female") %>%
nrow()
View(female_combined)
# total lyric
female_combined %>%
distinct(title) %>%
nrow()
# total female songs
rankings %>%
filter(gender == "female") %>%
nrow()
# total lyric
female_combined %>%
distinct(title) %>%
nrow()
# total female songs
rankings %>%
filter(gender == "female") %>%
nrow()
# total lyric
female_combined %>%
distinct(title) %>%
nrow()
# total female songs
rankings %>%
filter(gender == "male") %>%
nrow()
# total lyric
male_combined %>%
distinct(title) %>%
nrow()
# total female songs
rankings %>%
filter(gender == "male") %>%
nrow()
rankings %>%
filter(gender == "male") %>%
dplyr::select(title, artist) %>%
filter(!title %in% male_combined$title)
rankings %>%
filter(gender == "female") %>%
dplyr::select(title, artist) %>%
filter(!title %in% female_combined$title)
View(rankings)
rankings %>%
filter(gender == "male") %>%
dplyr::select(title, artist) %>%
filter(!title %in% male_combined$title)
# total lyric
female_combined %>%
distinct(title) %>%
nrow()
e
rankings %>%
filter(gender == "female") %>%
dplyr::select(title, artist) %>%
filter(!title %in% female_combined$title)
male_combined %>%
distinct(title, artist)
male_combined %>%
distinct(title, artist) %>%
arrange(title)
View(female_combined)
female_combined
file = list.files(path="data\\female\\", pattern = "*.txt", full.names = TRUE)
file
line = lapply(file, readLines)
file = unlist(mapply(rep, file, sapply(line,length), SIMPLIFY=FALSE, USE.NAMES=FALSE))
df = data.frame(file=file,line=unlist(line))
View(df)
file = list.files(path="data\\female\\", pattern = "*.txt", full.names = F)
file
line = lapply(file, readLines)
file = list.files(path="data\\female\\", pattern = "*.txt", full.names = TRUE)
line = lapply(file, readLines)
file = unlist(mapply(rep, file, sapply(line,length), SIMPLIFY=FALSE, USE.NAMES=FALSE))
file
file_name = list.files(path="data\\female\\", pattern = "*.txt", full.names = FALSE)
file = list.files(path="data\\female\\", pattern = "*.txt", full.names = TRUE)
file_name = list.files(path="data\\female\\", pattern = "*.txt", full.names = FALSE)
line = lapply(file, readLines)
file = unlist(mapply(rep, file_name, sapply(line,length), SIMPLIFY=FALSE, USE.NAMES=FALSE))
file_name = unlist(mapply(rep, file_name, sapply(line,length), SIMPLIFY=FALSE, USE.NAMES=FALSE))
df = data.frame(file = file_name,line = unlist(line))
View(df)
female_online <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", file, ""))
View(df)
female_online <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub("\\.txt", file, ""))
View(female_online)
female_online <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", file, ""))
View(female_online)
female_online <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file))
View(female_online)
female_online <- data.frame(file = file_name,line = unlist(line)) %>%
drop_na() %>%
mutate(file = gsub(".txt", "", file)) %>%
View(female_online)
female_online <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
female_online <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
female_online <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file))
female_online <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file))
female_online <- data.frame(file = file_name,line = unlist(line)) %>%
drop_na() %>%
mutate(file = gsub(".txt", "", file))
View(female_online)
# male
file <- list.files(path="data\\male\\", pattern = "*.txt", full.names = TRUE)
file_name <- list.files(path="data\\male\\", pattern = "*.txt", full.names = FALSE)
line <- lapply(file, readLines)
file_name <- unlist(mapply(rep, file_name, sapply(line,length), SIMPLIFY=FALSE, USE.NAMES=FALSE))
male_online <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file))
View(male_online)
View(female_online)
View(female_combined)
female <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
rbine(female_combined %>% dplyr::select(title, line))
female <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
rbind(female_combined %>% dplyr::select(title, line))
female <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file) %>%
rbind(female_combined %>% dplyr::select(title, line))
female_combined %>% dplyr::select(title, line)
female <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file) %>%
rbind(female_combined %>% dplyr::select(title, line))
female <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file) %>%
bind_rows(female_combined %>% dplyr::select(title, line))
View(female)
female_online <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file))
female <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file)# %>%
View(female)
female <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file, line) %>%
bind_rows(female_combined %>% dplyr::select(title, line))
View(female)
male <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file, line) %>%
bind_rows(male_combined %>% dplyr::select(title, line))
female <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file, line) %>%
bind_rows(female_combined %>% dplyr::select(title, line)) %>%
mutate(gender = "female")
male <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file, line) %>%
bind_rows(male_combined %>% dplyr::select(title, line)) %>%
mutate(gender = "male")
female <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file, line) %>%
rbind(female_combined %>% dplyr::select(title, line)) %>%
mutate(gender = "female")
male <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file, line) %>%
rbind(male_combined %>% dplyr::select(title, line)) %>%
mutate(gender = "male")
df <- rbind(female, male)
View(df)
female <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file, line) %>%
rbind(female_combined %>% dplyr::select(title, line)) %>%
mutate(doc_id = "female")
male <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file, line) %>%
rbind(male_combined %>% dplyr::select(title, line)) %>%
mutate(doc_id = "male")
female <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file, line) %>%
rbind(female_combined %>% dplyr::select(title, line)) %>%
select(doc_id = "female", text = line)
female <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file, line) %>%
rbind(female_combined %>% dplyr::select(title, line)) %>%
dplyr::select(doc_id = "female", text = line)
female <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file, line) %>%
rbind(female_combined %>% dplyr::select(title, line)) %>%
mutate(doc_id = "female")
female <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file, line) %>%
rbind(female_combined %>% dplyr::select(title, line)) %>%
mutate(doc_id = "female") %>%
select(doc_id, text = line)
female <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file, line) %>%
rbind(female_combined %>% dplyr::select(title, line)) %>%
mutate(doc_id = "female") %>%
dplyr::select(doc_id, text = line)
male <- data.frame(file = file_name,line = unlist(line)) %>%
mutate(file = gsub(".txt", "", file)) %>%
dplyr::select(title = file, line) %>%
rbind(male_combined %>% dplyr::select(title, line)) %>%
mutate(doc_id = "male") %>%
dplyr::select(doc_id, text = line)
df <- rbind(female, male)
compare <- rbind(female, male)
library(tm)
compare_source <- DataframeSource(compare)
compare_corpus <- VCorpus(compare_source)
View(compare_corpus)
View(df)
# female
file <- list.files(path="data\\female\\", pattern = "*.txt", full.names = TRUE)
file_name <- list.files(path="data\\female\\", pattern = "*.txt", full.names = FALSE)
line <- lapply(file, readLines(encoding = "UTF-8"))
